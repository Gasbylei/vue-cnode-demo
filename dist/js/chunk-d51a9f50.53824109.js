(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d51a9f50"],{"1ae9":function(t,s,a){},"4e6c":function(t,s,a){"use strict";var e=a("1ae9"),n=a.n(e);n.a},5923:function(t,s,a){},"64ef":function(t,s,a){"use strict";var e=a("5923"),n=a.n(e);n.a},7387:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"col-md-3 sidebar"},[a("div",{staticClass:"panel panel-default"},[a("div",{staticClass:"panel-heading"},[t._v("\n    作者\n  ")]),a("div",{staticClass:"panel-body"},[a("div",{staticClass:"user_card"},[a("a",{staticClass:"user_avatar",attrs:{href:"#"}},[a("img",{attrs:{src:t.authorInfo.avatar_url,alt:t.authorInfo.loginname}})]),a("span",{staticClass:"user_name"},[a("router-link",{staticClass:"dark",attrs:{to:{path:"/userinfo",query:{username:t.authorInfo.loginname}}}},[t._v(t._s(t.authorInfo.loginname))])],1),a("div",{staticClass:"board"},[a("div",{staticClass:"floor"},[a("span",{staticClass:"big"},[t._v("积分: "+t._s(t.authorInfo.score))])])]),a("span",{staticClass:"signature"},[t._v('\n        "2019 拥抱大前端"\n      ')])])])]),a("div",{staticClass:"panel panel-default",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"panel-heading"},[t._v("\n      作者其他话题\n    ")]),a("div",{staticClass:"panel-body"},[a("ul",{staticClass:"unstyled"},t._l(t.recentTopics,function(s,e){return a("li",{key:e},[e<5?a("div",[a("router-link",{staticClass:"topic_title",attrs:{to:{path:"detail",query:{id:s.id,username:s.author.loginname}},title:s.title}},[t._v(t._s(s.title))])],1):t._e()])}),0)])])])},n=[],i={name:"TheSideBar",data:function(){return{authorInfo:"",recentTopics:""}},created:function(){var t=this,s=this.$route.query.username||this.$store.state.userinfo.username;this.axios.get("https://cnodejs.org/api/v1/user/"+s).then(function(s){t.authorInfo=s.data.data,t.recentTopics=s.data.data.recent_topics})}},o=i,r=(a("64ef"),a("2877")),c=Object(r["a"])(o,e,n,!1,null,"5921626b",null);s["a"]=c.exports},c90f:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"container"},[a("div",{staticClass:"col-md-9"},[a("div",{staticClass:"panel panel-default"},[a("div",{staticClass:"panel-heading"},[a("span",{staticClass:"topic_full_title"},[t._v(t._s(t.topicitem.title))]),a("div",{staticClass:"changes"},[a("span",[t._v("• 发布于 "+t._s(t._f("moment")(t.topicitem.create_at,"from")))]),a("span",[t._v(" • 作者 "+t._s(t.topicitem.author.loginname))]),a("span",[t._v(" • "+t._s(t.topicitem.visit_count)+" 浏览")]),a("span",[t._v(" • 来自 "+t._s(t.topicitem.tab))]),a("span",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.auth,expression:"this.$store.state.auth"}]},[t.topicitem.is_collect?a("input",{staticClass:"collect pull-right btn btn-default",attrs:{type:"button",value:"取消收藏"},on:{click:function(s){return t.cancelCollect()}}}):a("input",{staticClass:"collect pull-right btn btn-primary",attrs:{type:"button",value:"收藏"},on:{click:function(s){return t.collect()}}})])])]),a("div",{staticClass:"panel-body",domProps:{innerHTML:t._s(t.topicitem.content)}},[t._v("\n         "+t._s(t.topicitem.content)+"\n      ")])]),a("div",{staticClass:"panel panel-default reply-list"},[a("div",{staticClass:"panel-heading"},[a("span",[t._v(t._s(t.comments.length)+" ")]),t._v(" 回复\n      ")]),t._l(t.comments,function(s,e){return a("div",{key:e,staticClass:"panel-body"},[a("div",{staticClass:"author_content"},[a("router-link",{attrs:{to:{path:"/userinfo",query:{username:s.author.loginname}}}},[a("img",{attrs:{src:s.author.avatar_url,width:"30px",height:"30px",alt:s.author.loginname}})]),a("div",{staticClass:"user_info"},[a("router-link",{staticClass:"reply_author",attrs:{to:{path:"/userinfo",query:{username:s.author.loginname}}}},[t._v("\n            "+t._s(s.author.loginname)+"\n            ")]),a("a",{staticClass:"reply_time"},[t._v(t._s(e+1)+"楼• "+t._s(t._f("moment")(s.create_at,"from")))])],1),a("div",{staticClass:"user_action pull-right"},[a("span",{on:{click:function(a){return t.ups(s)}}},[a("i",{staticClass:"fa up_btn",class:[t.isUped(s.ups)?"fa-thumbs-up":"fa-thumbs-o-up"],attrs:{title:"喜欢"}}),a("span",{staticClass:"up-count"},[t._v("\n                  "+t._s(s.ups.length)+"\n              ")])])])],1),a("div",{staticClass:"reply_content"},[a("div",{staticClass:"markdown-text",domProps:{innerHTML:t._s(s.content)}},[t._v("\n            "+t._s(s.content)+"\n          ")])])])})],2)]),a("TheSideBar")],1)},n=[],i=a("323e"),o=a.n(i),r=a("7387"),c={data:function(){return{topicitem:"",comments:""}},components:{TheSideBar:r["a"]},created:function(){this.getData()},watch:{$route:function(t,s){this.getData()}},methods:{collect:function(){var t=this;this.axios.post("https://cnodejs.org/api/v1/topic_collect/collect",{accesstoken:this.$store.state.userinfo.token,topic_id:this.topicitem.id}).then(function(s){console.log(s.data),t.topicitem.is_collect=!0}).catch(function(s){t.$message.show(s.response.data.error_msg,"danger")})},cancelCollect:function(){var t=this;this.axios.post("https://cnodejs.org/api/v1/topic_collect/de_collect",{accesstoken:this.$store.state.userinfo.token,topic_id:this.topicitem.id}).then(function(s){t.topicitem.is_collect=!1}).catch(function(s){t.$message.show(s.response.data.error_msg,"danger")})},getData:function(){var t=this;o.a.start(),this.axios.get("https://cnodejs.org/api/v1/topic/"+this.$route.query.id,{params:{accesstoken:this.$store.state.userinfo.token}}).then(function(s){t.topicitem=s.data.data,t.comments=s.data.data.replies,o.a.done()})},ups:function(t){var s=this;this.$store.state.userinfo.token?this.axios.post("https://cnodejs.org/api/v1/reply/"+t.id+"/ups",{accesstoken:this.$store.state.userinfo.token}).then(function(a){if("down"===a.data.action){var e=l(s.$store.state.userinfo.userId,t.ups);t.ups.splice(e,1)}else t.ups.push(s.$store.state.userinfo.userId)}).catch(function(t){s.$message.show(t.response.data.error_msg,"danger")}):(this.$router.push({path:"/login"}),this.$message.show("请登录后再点赞哦","warning"))},isUped:function(t){return l(this.$store.state.userinfo.userId,t)>=0}}};function l(t,s){if(Array.prototype.indexOf)return s.indexOf(t);for(var a=0;a<s.length;a++)if(s[a]===t)return a;return-1}var u=c,p=(a("4e6c"),a("2877")),d=Object(p["a"])(u,e,n,!1,null,"9142e0ec",null);s["default"]=d.exports}}]);
//# sourceMappingURL=chunk-d51a9f50.53824109.js.map